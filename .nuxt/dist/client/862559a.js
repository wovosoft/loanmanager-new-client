(window.webpackJsonp=window.webpackJsonp||[]).push([[11,14,20],{338:function(t,e,n){var content=n(341);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(127).default)("f497bbde",content,!0,{sourceMap:!1})},339:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var l=function(t,data){return t.$bvToast.toast(data.message,{title:data.title||"SUCCESS",variant:data.type||"success",autoHideDelay:data.delay||3e3,appendToast:!0})},o=function(t,data){var e=t.$createElement,content=[],n=[];if(data.errors)for(var l in data.errors)n.push(e("li",data.errors[l]));content.push(e("ol",{class:["pl-3"]},n));var o=e("div",[e("h5",{class:"font-weight-bold"},data.message||"Operation Failed"),content]);return t.$bvToast.toast(o,{title:data.title||"FAILED",variant:data.type||"danger",autoHideDelay:data.delay||5e3,appendToast:!0})},r=function(t,e,n,data){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"the_form";if(!t.$refs[r].checkValidity())return t.$refs[r].reportValidity(),!1;t.$axios.post(n,data).then((function(n){l(t,n.data),t.$emit("stored",n.data),"function"==typeof e?e():e&&e.hasOwnProperty("vueTarget")&&e.vueTarget.hide()})).catch((function(e){o(t,e.response.data)}))}},340:function(t,e,n){"use strict";n(338)},341:function(t,e,n){var l=n(126)(!1);l.push([t.i,".typehead-dd .dropdown-menu-scrollable{max-height:300px;overflow-y:scroll!important;overflow-x:auto;width:100%}.typehead-dd .dropdown-toggle{text-align:left}.typehead-dd .dropdown-toggle:after{right:10px;position:absolute;margin-top:6px}.typehead-dd .dd-toggle-border-color{border:1px solid #ced4da}",""]),t.exports=l},342:function(t,e,n){"use strict";n.r(e);n(246),n(9),n(83),n(84),n(29);var l=n(5),o={name:"VSelect",props:{initialItem:{default:null},initPlaceholder:{type:String,default:function(){return"Not Selected"}},variant:{type:String,default:"outline-dark"},block:{type:Boolean,default:!0},menuClass:{type:String,default:null},searchSize:{type:String,default:"sm"},searchPlaceholder:{type:String,default:"Search Items..."},options:{type:Array|Function,default:function(){return[]}},valueField:{type:String,default:"value"},textField:{type:String,default:"text"},value:{default:null},clearSearchOnSelect:{type:Boolean,default:!1},limit:{type:Number,default:null},toggleClass:{type:String|Array,default:"dd-toggle-border-color"}},beforeMount:function(){this.init.text=this.initPlaceholder},mounted:function(){this.initial&&this.value&&this.searchItems(this.value,!0)},watch:{value:function(t){this.initial&&t&&this.searchItems(t,!0)},query:function(t){this.searchItems(t)},selectedItem:function(t){Object(l.j)(t)&&!Array.isArray(t)?"function"==typeof this.textField?this.init.text=this.textField(t):this.init.text=t[this.textField]:this.init.text=this.initPlaceholder,Object(l.j)(t)&&!Array.isArray(t)?"function"==typeof this.valueField?this.$emit("input",this.valueField(t)):this.$emit("input",t[this.valueField]):this.$emit("input",t)}},data:function(){return{init:{text:"Select Element"},query:null,selectedItem:null,searchedItems:[],initial:!0}},methods:{dropdownOpened:function(){this.$el.querySelector("[type='search']").focus()},itemSelected:function(t){this.$set(this,"selectedItem",t),this.clearSearchOnSelect&&(this.query=null),this.$emit("itemSelected",t)},searchItems:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(this.options)){var l=this.options.filter((function(i){return i[e.textField].toLocaleLowerCase().includes((t||"").toLocaleLowerCase())}));this.limit&&(l=l.slice(0,this.limit)),this.$set(this,"searchedItems",l)}else"function"==typeof this.options&&this.options(t,n).then((function(t){n?(e.$set(e,"searchedItems",[t]),e.selectedItem=t):e.$set(e,"searchedItems",t),e.initial=!1}))}}},r=(n(340),n(82)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-dd",t._b({staticClass:"typehead-dd",attrs:{"toggle-class":t.toggleClass,"menu-class":["dropdown-menu-scrollable",t.menuClass].join(" ")},on:{shown:t.dropdownOpened}},"b-dd",Object.assign({},t.$props,t.$attrs,t.init),!1),[n("b-input",{staticClass:"ml-2 mr-2",staticStyle:{width:"calc(100% - 14px)"},attrs:{placeholder:t.searchPlaceholder,size:t.searchSize,type:"search"},on:{input:function(e){return t.$emit("search",e)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t._v(" "),t._l(t.searchedItems,(function(e,l){return n("b-dd-item",{key:l,on:{click:function(n){return t.itemSelected(e)}}},[t._v("\n        "+t._s(e[t.textField])+"\n    ")])}))],2)}),[],!1,null,null,null);e.default=component.exports},353:function(t,e,n){"use strict";n.r(e);var l={props:{value:{default:null}},data:function(){return{query:null,item:null}},watch:{value:function(t){this.$set(this,"item",t)},item:function(t){this.$emit("input",t)}},methods:{searchItems:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.$axios.post("/installments/search_loans",{exact:e,filter:t}).then((function(t){return t.data})).catch((function(t){return[]}))}}},o=n(82),component=Object(o.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-select",{attrs:{size:"sm","toggle-class":"border-0","init-placeholder":"Search Loan",options:t.searchItems},on:{itemSelected:function(e){return t.$emit("itemSelected",e)}},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{VSelect:n(342).default})},359:function(t,e,n){"use strict";n.r(e);n(83);var l=n(339),o={props:{item:{type:null|Object},value:{type:Boolean,default:!1}},data:function(){return{is_visible:!1,form:{}}},computed:{payment_methods:function(){return[{text:(t=this).$t("cash"),value:"cash"},{text:t.$t("mobile"),value:"mobile"},{text:t.$t("card"),value:"card"},{text:t.$t("bank"),value:"bank"}];var t}},methods:{setLoanFields:function(t){console.log(t),this.form.amount=t.installment_amount||0},setItem:function(){this.$set(this,"form",JSON.parse(JSON.stringify(this.item)))},handleSubmit:function(t){Object(l.a)(this,t,"/installments/store",JSON.parse(JSON.stringify(this.form)))},getType:function(t){return["date"].includes(t)?{type:"date"}:["amount"].includes(t)?{type:"number",min:0,step:"any"}:{type:"text"}},isRequired:function(t){return["name","nid","fathers_name","mothers_name"].includes(t)},findLoan:function(t){this.$axios.post("/installments/search_loans",{filter:""}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response.data)}))}},watch:{value:function(t){this.is_visible=t}}},r=n(82),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{"header-class":"py-2","footer-class":"py-1","button-size":"sm","ok-title":t.$t("submit"),"cancel-title":t.$t("cancel"),title:t.$t("Installment Details"),"header-bg-variant":"dark","header-text-variant":"light"},on:{ok:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)},shown:t.setItem,hidden:function(e){t.$emit("input",!1),t.$emit("hidden",!0),t.form={}}},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.hide;return[n("b-form",{ref:"the_form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(l)}}},[n("table",{staticClass:"table table-sm table-bordered table-hover"},[n("tr",[n("th",[t._v(t._s(t.$t("loan")))]),t._v(" "),n("td",[n("loans-select",{staticClass:"border-0",on:{itemSelected:t.setLoanFields},model:{value:t.form.loan_id,callback:function(e){t.$set(t.form,"loan_id",e)},expression:"form.loan_id"}})],1)]),t._v(" "),t._l(Object.keys(t.form),(function(e){return[["date","amount","payment_method"].includes(e)?n("tr",[n("th",[t._v(t._s(t.$t(e)+(t.isRequired(e)?" *":"")))]),t._v(" "),n("td",{staticClass:"p-0"},[["date","amount"].includes(e)?n("b-form-input",t._b({staticClass:"border-0",attrs:{size:"sm"},model:{value:t.form[e],callback:function(n){t.$set(t.form,e,n)},expression:"form[x]"}},"b-form-input",t.getType(e),!1)):n("b-form-select",{staticClass:"border-0",attrs:{size:"sm",options:t.payment_methods},model:{value:t.form[e],callback:function(n){t.$set(t.form,e,n)},expression:"form[x]"}})],1)]):t._e()]}))],2)])]}}]),model:{value:t.is_visible,callback:function(e){t.is_visible=e},expression:"is_visible"}})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LoansSelect:n(353).default})}}]);